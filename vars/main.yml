---
# vars file for owncloud
_owncloud_requirements:
  default:
    - php-curl
    - php-fpm
    - php-gd
    - php-intl
    - php-json
    - php-ldap
    - php-mbstring
    - php-mysqlnd
    - php-pecl-apcu
    - php-pecl-redis
    - php-process
    - php-xml
    - php-zip
    - redis
  Alpine:
    - php7-apcu
    - php7-ctype
    - php7-curl
    - php7-dom
    - php7-fpm
    - php7-gd
    - php7-iconv
    - php7-intl
    - php7-json
    - php7-ldap
    - php7-mbstring
    - php7-mysqlnd
    - php7-mysqli
    - php7-pdo
    - php7-posix
    - php7-simplexml
    - php7-xmlreader
    - php7-xmlwriter
    - php7-xml
    - php7-zip
    - redis
  Archlinux:
    - php-fpm
    - php-apcu
    - php-gd
    - php-intl
    - php-ldap
    - redis
  CentOS:
    - php-curl
    - php-fpm
    - php-gd
    - php-intl
    - php-json
    - php-ldap
    - php-mbstring
    - php-mysql
    - php-pecl-apcu
    - php-pecl-redis
    - php-process
    - php-xml
    - redis
  Debian:
    - php-apcu
    - php-common
    - php-curl
    - php-fpm
    - php-gd
    - php-intl
    - php-ldap
    - php-mbstring
    - php-mysql
    - php-xml
    - php-zip
    - redis-server
  Ubuntu:
    - php-apcu
    - php-common
    - php-curl
    - php-fpm
    - php-gd
    - php-intl
    - php-ldap
    - php-mbstring
    - php-mysql
    - php-xml
    - php-zip
    - redis-server
  openSUSE Leap:
    - php-posix
    - php7-curl
    - php7-fpm
    - php7-gd
    - php7-intl
    - php7-json
    - php7-ldap
    - php7-mbstring
    - php7-pdo
    - redis
  openSUSE Tumbleweed:
    - php7-posix
    - php7-curl
    - php7-fpm
    - php7-gd
    - php7-intl
    - php7-json
    - php7-ldap
    - php7-mbstring
    - php7-pdo
    - redis

owncloud_requirements: "{{ _owncloud_requirements[ansible_distribution] | default(_owncloud_requirements['default']) }}"

owncloud_sebooleans:
  - httpd_tmp_exec
  - httpd_unified

owncloud_archive: "https://download.owncloud.org/community/owncloud-{{ owncloud_version }}.zip"

_owncloud_destination:
  default: /var/www/html
  Alpine: /var/www
  Archlinux: /srv/http
  openSUSE Leap: /srv/www/htdocs
  openSUSE Tumbleweed: /srv/www/htdocs

owncloud_destination: "{{ _owncloud_destination[ansible_distribution] | default(_owncloud_destination['default']) }}"

_owncloud_httpd_owner:
  default: apache
  Archlinux: root
  Debian: www-data
  Ubuntu: www-data
  openSUSE Leap: wwwrun
  openSUSE Tumbleweed: wwwrun

owncloud_httpd_owner: "{{ _owncloud_httpd_owner[ansible_distribution] | default(_owncloud_httpd_owner['default']) }}"

_owncloud_httpd_group:
  default: apache
  Archlinux: root
  Debian: www-data
  Ubuntu: www-data
  openSUSE Leap: www
  openSUSE Tumbleweed: www

owncloud_httpd_group: "{{ _owncloud_httpd_group[ansible_distribution] | default(_owncloud_httpd_group['default']) }}"

_owncloud_config_directory:
  default: /etc/httpd/conf.d
  Alpine: /etc/apache2/conf.d
  Archlinux: /etc/httpd/conf/extra
  CentOS: /etc/httpd/conf.d
  Debian: /etc/apache2/conf-enabled
  Ubuntu: /etc/apache2/conf-enabled
  openSUSE Leap: /etc/apache2/conf.d
  openSUSE Tumbleweed: /etc/apache2/conf.d

owncloud_config_directory: "{{ _owncloud_config_directory[ansible_distribution] | default(_owncloud_config_directory['default']) }}"

owncloud_packages:
  - owncloud-files

owncloud_permissions:
  - name: "{{ owncloud_destination }}/owncloud/.htaccess"
    group: root
    mode: 0640

_owncloud_fpm_directory:
  default: /etc
  Alpine: /etc/php7
  Debian: /etc/php/7.0/fpm
  Fedora: /etc
  openSUSE Leap: /etc/php7/fpm
  openSUSE Tumbleweed: /etc/php7/fpm
  Ubuntu: /etc/php/7.0/fpm

owncloud_fpm_directory: "{{ _owncloud_fpm_directory[ansible_distribution] | default(_owncloud_fpm_directory['default']) }}"

_owncloud_fpm_pid_directory:
  default: /run/php-fpm
  Alpine: /run/php-fpm7
  Debian: /var/run/php
  Fedora: /run/php-fpm
  openSUSE Leap: /var/run
  openSUSE Tumbleweed: /var/run
  Ubuntu: /var/run/php

owncloud_fpm_pid_directory: "{{ _owncloud_fpm_pid_directory[ansible_distribution] | default(_owncloud_fpm_pid_directory['default']) }}"

_owncloud_fpm_user:
  default: nobody
  Debian: daemon
  Ubuntu: daemon

owncloud_fpm_user: "{{ _owncloud_fpm_user[ansible_distribution] | default(_owncloud_fpm_user['default']) }}"

_owncloud_fpm_group:
  default: nobody
  Debian: daemon
  Ubuntu: daemon

owncloud_fpm_group: "{{ _owncloud_fpm_group[ansible_distribution] | default(_owncloud_fpm_group['default']) }}"

_owncloud_fpm_include_directory:
  default: "{{ owncloud_fpm_directory }}/php-fpm.d"
  Debian: "{{ owncloud_fpm_directory }}/conf.d"
  Ubuntu: "{{ owncloud_fpm_directory }}/conf.d"

owncloud_fpm_include_directory: "{{ _owncloud_fpm_include_directory[ansible_distribution] | default(_owncloud_fpm_include_directory['default']) }}"

_owncloud_fpm_service:
  default: php-fpm
  Alpine: php-fpm7
  Debian: php7.0-fpm.service
  Fedora: php-fpm
  openSUSE Leap: php-fpm
  openSUSE Tumbleweed: php-fpm
  Ubuntu: php7.0-fpm.service

owncloud_fpm_service: "{{ _owncloud_fpm_service[ansible_distribution] | default(_owncloud_fpm_service['default']) }}"

owncloud_command: php occ maintenance:install --database mysql --database-name {{ owncloud_database_name }} --database-user {{ owncloud_database_user }} --database-pass {{ owncloud_database_pass }} --database-host {{ owncloud_database_host }} --admin-user {{ owncloud_admin_user }} --admin-pass {{ owncloud_admin_pass }}
